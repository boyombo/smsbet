{% load static from staticfiles %}
<!DOCTYPE html>
<html>
  <head>
      <style type="text/css">
      html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
      </style>
      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCiIEYStrod4cuz22c4VaT8vkrEMYRX1zM"></script>
    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
     <script type="text/javascript">
      function initialize() {
      }
      google.maps.event.addDomListener(window, 'load', initialize);
      // Getting markers
     $(function(){
        var mapOptions = {
          center: { lat: 6.5732, lng: 3.39998},
          zoom: 10 
        };
       var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);


        $.get('/markers/', {"one": "two"}, function(data, status){
          console.log(data);
          $.each(data, function(item, results){
            console.log(results);
            var latlng = new google.maps.LatLng(results['latitude'], results['longitude']);
            var icon_color = "marker.png";
            if (results['response'] == '3'){
              icon_color = "marker_green.png";
            }
            else if (results['response'] == '2') {
              icon_color = "marker_orange.png";
            }
            new google.maps.Marker({
                position: latlng,
                map: map,
                title: results['response'],
                icon: "http://maps.google.com/mapfiles/" + icon_color
            });
          });
        });
      });
    </script>
 </head>
 <body>
     <div id="map-canvas"></div>
     <script type="text/javascript">
    /*var markers = [
        {% for marker in markers %}
            {{ marker }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    ];

    console.error(markers);
    console.log(typeof(markers));
    for (var i=0;i< markers.length;i++){
        //var parts = markers[i].split(',');
        //console.log(parts.length);
        console.log(markers[i]);
        console.log(typeof(markers[i]));
    }*/
     </script>
     
     {% for marker in markers %}{{marker}}{% endfor %}
 </body>
</html>

